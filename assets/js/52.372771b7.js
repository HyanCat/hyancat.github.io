(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{554:function(t,a,s){"use strict";s.r(a);var n=s(2),e=Object(n.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[t._v("ä¸€æ­¥ä¸€æ­¥å®ç°ä¸€ä¸ªç®€å•å¥½ç”¨çš„ç›‘æµ‹ FPS çš„æ§ä»¶ã€‚")]),t._v(" "),a("h2",{attrs:{id:"runloop-æœºåˆ¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#runloop-æœºåˆ¶"}},[t._v("#")]),t._v(" Runloop æœºåˆ¶")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("å…³äº Runloop æœºåˆ¶çœ‹ ibireme çš„è¿™ç¯‡æ–‡ç« \n"),a("a",{attrs:{href:"http://blog.ibireme.com/2015/05/18/runloop/",target:"_blank",rel:"noopener noreferrer"}},[t._v("æ·±å…¥ç†è§£ RunLoop"),a("OutboundLink")],1)])]),t._v(" "),a("li",[a("p",[t._v("CADisplayLink æ˜¯ä¸€ä¸ªå’Œå±å¹•åˆ·æ–°ç‡ä¸€è‡´çš„å®šæ—¶å™¨ã€‚æŸ¥çœ‹ CADisplayLink.h æ–‡ä»¶ï¼Œå®ƒæä¾›äº†å››ä¸ªæ–¹æ³•")]),t._v(" "),a("div",{staticClass:"language-ObjectiveC extra-class"},[a("pre",{pre:!0,attrs:{class:"language-objectivec"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ–°å»ºå±å¹•åˆ·æ–°åŒæ­¥å®šæ—¶å™¨ï¼Œå±å¹•æ¯åˆ·æ–°ä¸€æ¬¡ï¼ˆä¸€å¸§ï¼‰ï¼Œè°ƒç”¨ä¸€æ¬¡ selector")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("CADisplayLink "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("displayLinkWithTarget"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("target selector"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("SEL"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("sel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ·»åŠ åˆ°æŸä¸ª runloop ä¸­")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("addToRunLoop"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("NSRunLoop "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("runloop forMode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("NSString "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("mode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä»æ·»åŠ åˆ°çš„ runloop ä¸­ç§»é™¤")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("removeFromRunLoop"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("NSRunLoop "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("runloop forMode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("NSString "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("mode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é”€æ¯é‡Šæ”¾")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("invalidate"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])])]),t._v(" "),a("h2",{attrs:{id:"è§†å›¾"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#è§†å›¾"}},[t._v("#")]),t._v(" è§†å›¾")]),t._v(" "),a("p",[t._v("FPSLabel è¿™ç§è°ƒè¯•æ€§å·¥å…·ï¼Œéœ€è¦ä¸€ç›´æ˜¾ç¤ºåœ¨å±å¹•æœ€ä¸Šå±‚ï¼Œé‚£æˆ‘ä»¬ç›´æ¥å°†å®ƒæ·»åŠ åˆ°æœ€å¼€å§‹åˆ›å»ºçš„ UIWindow ä¸Šã€‚")]),t._v(" "),a("div",{staticClass:"language-ObjectiveC extra-class"},[a("pre",{pre:!0,attrs:{class:"language-objectivec"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("instancetype"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("showInWindow"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("UIWindow "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("window\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    HyFPSLabel "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("label "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("HyFPSLabel alloc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" initWithFrame"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("CGRectZero"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    label"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("layer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cornerRadius "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4.f")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    label"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("layer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("masksToBounds "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" YES"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    label"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("textAlignment "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" NSTextAlignmentCenter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    label"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("userInteractionEnabled "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" NO"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    label"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("font "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("UIFont fontWithName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('@"Menlo"')]),t._v(" size"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("12")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("window addSubview"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("label"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("è¿™é‡Œ frame ä¸º CGRectZeroï¼Œå› ä¸ºè¦æ”¯æŒä¸åŒå±å¹•ä»¥åŠæ—‹è½¬ï¼Œæ‰€ä»¥ Autolayout æ˜¯å¿…é¡»çš„ã€‚")]),t._v(" "),a("div",{staticClass:"language-ObjectiveC extra-class"},[a("pre",{pre:!0,attrs:{class:"language-objectivec"}},[a("code",[t._v("label"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("translatesAutoresizingMaskIntoConstraints "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" NO"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¿™é‡Œä¸€å®šè¦æ³¨æ„ï¼Œä½¿ç”¨æ‰‹å†™åŸç”Ÿ autolayout çš„è¯ï¼Œéœ€è¦è®¾ç½® translatesAutoresizingMaskIntoConstraints ä¸º NO")]),t._v("\n\nNSLayoutConstraint "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("leadingLayout "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("NSLayoutConstraint constraintWithItem"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("label\n                                                                attribute"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("NSLayoutAttributeLeading\n                                                                relatedBy"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("NSLayoutRelationEqual\n                                                                   toItem"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("window\n                                                                attribute"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("NSLayoutAttributeLeading\n                                                               multiplier"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n                                                                 constant"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10.f")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nNSLayoutConstraint "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("bottomLayout "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("NSLayoutConstraint constraintWithItem"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("label\n                                                                attribute"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("NSLayoutAttributeBottom\n                                                                relatedBy"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("NSLayoutRelationEqual\n                                                                   toItem"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("window\n                                                                attribute"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("NSLayoutAttributeBottom\n                                                               multiplier"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n                                                                 constant"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10.f")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nNSLayoutConstraint "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("widthLayout "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("NSLayoutConstraint constraintWithItem"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("label\n                                                               attribute"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("NSLayoutAttributeWidth\n                                                               relatedBy"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("NSLayoutRelationEqual\n                                                                  toItem"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("nil\n                                                               attribute"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("NSLayoutAttributeNotAnAttribute\n                                                              multiplier"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n                                                                constant"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("60.f")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nNSLayoutConstraint "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("heightLayout "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("NSLayoutConstraint constraintWithItem"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("label\n                                                                attribute"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("NSLayoutAttributeHeight\n                                                                relatedBy"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("NSLayoutRelationEqual\n                                                                   toItem"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("nil\n                                                                attribute"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("NSLayoutAttributeNotAnAttribute\n                                                               multiplier"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n                                                                 constant"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20.f")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("IOS8_OR_LATER"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("NSLayoutConstraint activateConstraints"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("@")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("leadingLayout"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" bottomLayout"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" widthLayout"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" heightLayout"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("window addConstraints"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("@")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("leadingLayout"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" bottomLayout"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" widthLayout"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" heightLayout"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("å› ä¸ºè¦åšä¸€ä¸ªæ— ä¾èµ–çš„å·¥å…·åº“ï¼Œæ‰€ä»¥æ‰‹å†™åŸç”Ÿ Autolayoutï¼Œè™½ç„¶ä»£ç æœ‰äº›ç¹é‡ã€‚Masonry ç¬‘ç€è¯´ï¼šæˆ‘å››è¡Œä»£ç å°±æå®šã€‚ğŸ˜")]),t._v(" "),a("h2",{attrs:{id:"è®¡ç®—é€»è¾‘"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#è®¡ç®—é€»è¾‘"}},[t._v("#")]),t._v(" è®¡ç®—é€»è¾‘")]),t._v(" "),a("p",[t._v("æ¥ä¸‹æ¥å°±æ˜¯è¦å®Œå–„è¿™ä¸ª label è‡ªèº«äº†ã€‚åœ¨ init æ–¹æ³•ä¸­éœ€è¦åˆ›å»ºå¹¶æ·»åŠ  CADisplayLinkï¼š")]),t._v(" "),a("div",{staticClass:"language-ObjectiveC extra-class"},[a("pre",{pre:!0,attrs:{class:"language-objectivec"}},[a("code",[t._v("_displayLink "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("CADisplayLink displayLinkWithTarget"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("self")]),t._v(" selector"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("@selector")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tick"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("_displayLink addToRunLoop"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("NSRunLoop mainRunLoop"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" forMode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("NSRunLoopCommonModes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("è¿™é‡Œ "),a("code",[t._v("tick:")]),t._v(" è¿™ä¸ª selector å°±æ˜¯å’Œå±å¹•åˆ·æ–°ç‡ä¿æŒä¸€è‡´çš„æ–¹æ³•ã€‚åœ¨è¿™ä¸ªæ–¹æ³•é‡Œï¼Œæˆ‘ä»¬ç´¯è®¡æ—¶é—´è®¡ç®—æ¯ç§’æ‰§è¡Œæ¬¡æ•°ï¼Œå°±æ˜¯åˆ·æ–°ç‡äº†ã€‚")]),t._v(" "),a("div",{staticClass:"language-ObjectiveC extra-class"},[a("pre",{pre:!0,attrs:{class:"language-objectivec"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("tick"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("CADisplayLink "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("displayLink\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tCFTimeInterval currentTime "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" displayLink"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("timestamp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_lastTime "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// first time.")]),t._v("\n\t\t_lastTime "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" currentTime"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t_tickCount"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\tCFTimeInterval delta "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" currentTime "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" _lastTime"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("delta "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// get fps")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("self")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fps "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("MIN")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("lrint")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_tickCount "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" delta"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("60")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t_tickCount "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t_lastTime "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" currentTime"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[a("code",[t._v("self.fps")]),t._v(" ä¾¿æ˜¯å¾—åˆ°çš„ FPS å¸§ç‡ã€‚\né‚£ä¹ˆæœ€åä¸€æ­¥ä¾¿æ˜¯å°†å®ƒæ˜¾ç¤ºåœ¨å‰é¢åšå¥½çš„ label ä¸Šäº†ã€‚è¿™é‡Œé¢œè‰²æ ¹æ®å¸§ç‡ä»ç»¿è‰²åˆ°çº¢è‰²å˜åŒ–ã€‚"),a("code",[t._v("_displayLink")]),t._v(" æ–¹æ³•ï¼š")]),t._v(" "),a("div",{staticClass:"language-ObjectiveC extra-class"},[a("pre",{pre:!0,attrs:{class:"language-objectivec"}},[a("code",[t._v("CGFloat hue "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("self")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fps "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("24")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("self")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fps "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("24")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("120.f")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("self")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("textColor "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("UIColor colorWithHue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("hue saturation"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" brightness"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.9")]),t._v(" alpha"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("self")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("text "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("NSString stringWithFormat"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('@"%@ FPS"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("@")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("self")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("self")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("layer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("backgroundColor "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("UIColor blackColor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" colorWithAlphaComponent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.7f")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CGColor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("åˆ°è¿™é‡Œï¼ŒFPSLabel å·²ç»åªåšå®Œäº†ï¼Œå¯ä»¥åœ¨ "),a("code",[t._v("AppDelegate")]),t._v(" çš„ window ä¸Šäº†ã€‚")]),t._v(" "),a("h2",{attrs:{id:"æ›´è¿›ä¸€æ­¥"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ›´è¿›ä¸€æ­¥"}},[t._v("#")]),t._v(" æ›´è¿›ä¸€æ­¥")]),t._v(" "),a("p",[t._v("æˆ‘ä»¬æƒ³åœ¨å¸§ç‡ä¸å˜çš„æ—¶å€™ï¼Œä¸€èˆ¬æ˜¯ä¿æŒåœ¨æ»¡ 60 å¸§çš„æ—¶å€™ï¼Œè‡ªåŠ¨éšè—è¿™ä¸ª labelã€‚\nè¿™é‡Œåªéœ€è¦æ·»åŠ  KVO ç›‘å¬ "),a("code",[t._v("self.fps")]),t._v(" å±æ€§ã€‚")]),t._v(" "),a("p",[t._v("ç„¶ååœ¨ "),a("code",[t._v("_displayLink")]),t._v(" æ–¹æ³•ä¸­å¢åŠ æ˜¾ç¤ºå’Œéšè—çš„é€»è¾‘ï¼Œä»¥åŠæ¸éšæ¸ç°åŠ¨ç”»ã€‚\nè¿™é‡Œå»¶è¿Ÿ 2 ç§’æ— å˜åŒ–åˆ™è‡ªåŠ¨éšè—ï¼ˆå»¶è¿Ÿå¿…é¡»å¤§äº 1 ç§’ï¼Œå› ä¸ºå¸§ç‡æ˜¯æŒ‰ 1 ç§’è®¡æ•°æ¥ç®—çš„ï¼‰")]),t._v(" "),a("div",{staticClass:"language-ObjectiveC extra-class"},[a("pre",{pre:!0,attrs:{class:"language-objectivec"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("self")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("autoHide"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("NSObject cancelPreviousPerformRequestsWithTarget"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("self")]),t._v(" selector"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("@selector")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fadeOut"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" object"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("nil"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("self")]),t._v(" performSelector"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("@selector")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fadeOut"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" withObject"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("nil afterDelay"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("è‡³æ­¤ï¼Œä¸€ä¸ªèƒ½è‡ªåŠ¨éšè—çš„å¥½ç”¨åˆå¥½çœ‹çš„ FPSLabel åˆ¶ä½œå®Œæˆï¼Œè°ƒç”¨æ–¹æ³•ï¼š")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v("[HyFPSLabel showInWindow:self.window].autoHide = YES;\n")])])]),a("p",[t._v("å®Œæ•´ä»£ç è§ï¼š"),a("a",{attrs:{href:"https://github.com/HyanCat/HyFPSLabel",target:"_blank",rel:"noopener noreferrer"}},[t._v("HyanCat/HyFPSLabel"),a("OutboundLink")],1)]),t._v(" "),a("hr"),t._v(" "),a("p",[t._v("å‚è€ƒï¼š")]),t._v(" "),a("ul",[a("li",[t._v("https://github.com/xiekw2010/DXFPSLabel")]),t._v(" "),a("li",[t._v("https://github.com/ibireme/YYText/blob/master/Demo/YYTextDemo/YYFPSLabel.m")])])])}),[],!1,null,null,null);a.default=e.exports}}]);